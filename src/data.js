export const SITUATIONS = [
  { id: 'late', label: '지각 (Late)' },
  { id: 'deadline', label: '마감 놓침 (Deadline)' },
  { id: 'date', label: '약속 취소 (Cancel Date)' },
  { id: 'party', label: '모임 불참 (Skip Party)' },
  { id: 'call', label: '전화 못 받음 (Missed Call)' },
  { id: 'custom', label: '직접 입력 (Custom)' }
];

export const MODES = [
  { id: 'humor', label: '유머 (Humor)' },
  { id: 'desperate', label: '절박함 (Desperate)' },
  { id: 'polite', label: '정중함 (Polite)' }
];

const TEMPLATES = {
  late: {
    humor: [
      "오다가 시공간의 균열을 발견해서 막느라 늦었습니다. 지구를 구하는 일이 우선이라 생각했습니다.",
      "집 앞 고양이가 저를 간택하는 바람에 움직일 수가 없었습니다. 고양이법 제1조에 의거하여 어쩔 수 없었습니다.",
      "엘리베이터를 탔는데 버튼이 사라졌습니다. 호그와트로 가는 중이었나 봅니다.",
      "오늘따라 중력이 2배로 작용해서 침대에서 일어나는 데 평소보다 2배의 시간이 걸렸습니다."
    ],
    desperate: [
      "정말 죄송합니다! 오다가 배가 너무 아파서 화장실을 5번이나 들락거렸습니다. 제 장이 저를 배신할 줄은 몰랐습니다. 한 번만 봐주세요!",
      "지하철이 고장 났는데 택시도 안 잡히고 뛰어오다가 신발 굽이 부러졌습니다. 맨발로 뛰어갈 기세로 가고 있습니다. 제발 용서해주세요.",
      "알람이 안 울린 게 아니라 제가 기절해 있었습니다. 눈 떠보니 지금이네요. 죽을 죄를 지었습니다. 도착하면 뭐든 하겠습니다!"
    ],
    polite: [
      "교통 상황이 예상보다 훨씬 좋지 않아 도착이 지연되고 있습니다. 귀한 시간을 뺏어 정말 송구합니다. 최대한 신속히 이동하겠습니다.",
      "개인적인 사정으로 인해 출발이 다소 늦어졌습니다. 기다리게 해 드려 진심으로 사과드립니다. 도착하는 대로 바로 업무에 복귀하겠습니다.",
      "예기치 못한 사정이 생겨 약속 시간에 늦게 되었습니다. 너그러운 양해 부탁드리며, 도착 즉시 찾아뵙고 사과드리겠습니다."
    ]
  },
  deadline: {
    humor: [
      "파일을 전송하려는 순간 외계인의 침공으로 인터넷 케이블이 절단되었습니다. 현재 복구 중입니다.",
      "키보드의 'Enter' 키가 가출했습니다. 돌아오는 대로 제출하겠습니다.",
      "저의 천재적인 아이디어가 너무 많아서 파일 용량이 초과되었습니다. 압축하는 중입니다."
    ],
    desperate: [
      "컴퓨터가 갑자기 블루스크린을 띄우며 사망했습니다. 제 영혼도 같이 나갔습니다. 밤을 새워서라도 다시 하겠습니다. 제발 기회를 주세요!",
      "3일 밤을 새웠는데 마지막에 저장을 안 하고 껐습니다. 제 손가락을 원망하고 있습니다. 지금 울면서 다시 쓰고 있습니다.",
      "집에 도둑이 들어서 노트북만 훔쳐갔습니다... 라고 하고 싶지만 사실 제가 능력이 부족했습니다. 오늘 밤 안으로 무조건 끝내겠습니다!"
    ],
    polite: [
      "완성도를 높이기 위해 검토하는 과정에서 시간이 조금 더 소요되고 있습니다. 약속드린 시간을 지키지 못해 죄송합니다. 금일 중으로 반드시 송부드리겠습니다.",
      "예상치 못한 기술적 문제가 발생하여 작업이 지연되었습니다. 불편을 드려 대단히 죄송하며, 최대한 빠른 시일 내에 마무리하여 보고드리겠습니다.",
      "현재 마무리 단계에 있으나, 더 완벽한 결과물을 위해 수정 작업이 진행 중입니다. 너른 양해 부탁드립니다."
    ]
  },
  date: {
    humor: [
      "오늘 점성술사가 집 밖에 나가면 운석을 맞을 운세라고 했습니다. 우리의 안전을 위해 다음에 봐요.",
      "갑자기 제가 뱀파이어가 된 것 같습니다. 햇빛을 보면 타버릴 것 같아서 해 지고 나서 만나야 할 것 같아요 (다음 생에).",
      "국가정보원에서 긴급 소집이 왔습니다. 국가 기밀이라 자세히는 말 못 합니다."
    ],
    desperate: [
      "정말 미안해! 갑자기 집 천장이 무너져 내렸어 (마음의 천장이). 지금 수습하느라 정신이 하나도 없어. 내가 나중에 맛있는 거 10번 살게!",
      "갑자기 열이 40도까지 오르고 온몸이 떨려. 전염병은 아닌 것 같은데 너무 아파서 나갈 수가 없어. 정말 보고 싶었는데 미안해...",
      "지갑을 잃어버렸는데 카드 정지하고 경찰서 가고 난리도 아니야. 멘탈이 나가서 도저히 웃으면서 널 볼 수가 없어. ㅠㅠ"
    ],
    polite: [
      "갑작스러운 집안 사정으로 인해 부득이하게 약속을 미뤄야 할 것 같습니다. 미리 말씀드리지 못해 정말 죄송합니다. 다음에 제가 꼭 대접하겠습니다.",
      "몸 상태가 급격히 안 좋아져서 오늘 뵙기가 어려울 것 같습니다. 좋은 컨디션으로 뵙는 게 예의일 것 같아 양해를 구합니다. 죄송합니다.",
      "회사에 급한 용무가 생겨 참석이 어렵게 되었습니다. 소중한 시간을 비워두셨을 텐데 진심으로 사과드립니다."
    ]
  },
  party: {
    humor: [
      "제가 춤을 너무 격렬하게 추다가 허리를 삐끗해서 안정을 취해야 합니다. 저 없는 파티가 앙꼬 없는 찐빵이겠지만 즐겨주세요.",
      "오늘따라 내향형 자아가 너무 강력해져서 이불 밖으로 나올 수가 없습니다. 마음만은 그곳에서 춤추고 있습니다.",
      "집에 있는 금붕어가 우울증에 걸려서 상담해줘야 합니다."
    ],
    desperate: [
      "가려고 다 준비했는데 갑자기 배탈이 나서 화장실에서 살고 있어... 이런 모습 보여주기 싫어. 정말 미안해 ㅠㅠ",
      "이번 달 생활비가 바닥나서 차비도 없어... 걸어가기엔 너무 멀고... 비참하지만 이게 현실이야. 다음에 돈 생기면 꼭 갈게.",
      "어제 헤어진 연인이 집 앞에 찾아와서 난동을 부리고 있어. 경찰 부르고 수습하느라 못 갈 것 같아. 미안해..."
    ],
    polite: [
      "선약이 있었는데 제가 착각하여 일정이 겹쳤습니다. 저의 불찰로 참석하지 못하게 되어 정말 죄송합니다. 즐거운 시간 보내시길 바랍니다.",
      "개인적인 사정으로 참석이 어렵게 되었습니다. 초대해 주셔서 감사드리며, 함께하지 못해 아쉽습니다. 다음에 꼭 인사드리겠습니다.",
      "건강상의 이유로 오늘은 휴식을 취해야 할 것 같습니다. 좋은 자리에 함께하지 못해 송구합니다."
    ]
  },
  call: {
    humor: [
      "핸드폰이 묵언수행 중이었습니다. 이제야 속세로 돌아왔네요.",
      "벨소리가 너무 좋아서 감상하다가 받는 타이밍을 놓쳤습니다.",
      "손에 기름이 묻어서 터치가 안 됐습니다. 치킨을 먹고 있었거든요."
    ],
    desperate: [
      "핸드폰이 변기에 빠져서 드라이기로 말리느라 못 봤어! 제발 고장 안 났기를 기도해줘. 연락 늦어서 미안해!",
      "진동으로 해놨는데 가방 깊숙이 있어서 정말 몰랐어. 일부러 안 받은 거 절대 아니야! 화내지 말아줘 ㅠㅠ",
      "잠깐 잠들었는데 가위눌려서 못 일어났어. 전화 온 줄 꿈에도 몰랐어. 정말 미안해."
    ],
    polite: [
      "회의 중이라 전화를 받지 못했습니다. 연락 주셔서 감사합니다. 확인하는 대로 다시 연락드리겠습니다.",
      "운전 중이라 통화가 어려웠습니다. 부재중 전화 확인하고 바로 연락드립니다.",
      "잠시 자리를 비운 사이 연락이 왔었네요. 늦게 확인하여 죄송합니다. 용건 남겨주시면 바로 확인하겠습니다."
    ]
  },
  custom: {
    humor: [
      "그 상황에 대해서는 제 변호사(AI)와 상의해봐야 할 것 같습니다. 묵비권을 행사하겠습니다.",
      "우주의 기운이 저를 그 상황으로 이끌었습니다. 거스를 수 없는 운명이었습니다.",
      "솔직히 말하면 귀찮았습니다. 하지만 이렇게 솔직한 사람 보셨습니까? 용서해주시죠."
    ],
    desperate: [
      "제가 전생에 나라를 팔아먹었나 봅니다. 왜 저에게만 이런 일이 생기는지 모르겠습니다. 한 번만 자비를 베풀어주세요.",
      "지금 제 상황이 너무 비참해서 말로 다 할 수가 없습니다. 눈물 없이는 들을 수 없는 사연입니다. 제발 이해해주세요.",
      "무릎이라도 꿇으라면 꿇겠습니다. 정말 어쩔 수 없는 상황이었습니다. 살려주세요."
    ],
    polite: [
      "말씀하신 상황에 대해 깊이 반성하고 있으며, 불편을 드려 진심으로 죄송합니다. 너른 마음으로 이해해 주시면 감사하겠습니다.",
      "저의 부족함으로 인해 발생한 일입니다. 변명의 여지가 없습니다. 다시는 이런 일이 없도록 주의하겠습니다.",
      "사정이 여의치 않아 기대에 부응하지 못했습니다. 실망시켜 드려 죄송하며, 조속히 해결하도록 노력하겠습니다."
    ]
  }
};

export const generateExcuse = (situationId, mode, customInput = '') => {
  // If custom input is provided and situation is custom, we might want to use AI or mix it in.
  // For this MVP, if it's custom, we use generic templates but maybe prepend the custom input context if possible,
  // or just return the generic custom templates.
  
  // Let's try to be smart. If custom input exists, we can't really "generate" specific text without an LLM.
  // So we will return a generic excuse that fits any situation.
  
  const templates = TEMPLATES[situationId] || TEMPLATES['custom'];
  const modeTemplates = templates[mode];
  
  // Randomly select one
  const randomIndex = Math.floor(Math.random() * modeTemplates.length);
  let excuse = modeTemplates[randomIndex];
  
  // If it's custom input, we might want to format it slightly differently? 
  // Actually, the generic 'custom' templates are vague enough to work.
  // But let's add a prefix if custom input is present for better context?
  // No, that might break grammar. Let's stick to the generic ones for now.
  
  return excuse;
};
